<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Overview • rosettaR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Overview">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rosettaR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Overview.html">Overview</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Overview</h1>
            
      

      <div class="d-none name"><code>Overview.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://timalamenciak.github.io/rosettaR/">rosettaR</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette explains the overall usage of the <code>rosettaR</code>
package, including its core functions and workflows. At its heart,
<code>rosettaR</code> is a templating system with extra window dressing
and rules. This document will walk through the basic usage, starting
with a single template example and expanding to multi-template data
frames.</p>
<p>You can see the original pre-print for the conceptual background to
Rosetta Statements: <a href="https://arxiv.org/abs/2407.20007" class="external-link">Rosetta
Statements: Simplifying FAIR Knowledge Graph Construction with a
User-Centered Approach</a>.</p>
<p>Here are some key terms:</p>
<ul>
<li><p><strong>Slot</strong> - Think of a slot as a blank to be filled
in a Mad Lib. These are denoted in the templates using <a href="https://jinja.palletsprojects.com/en/stable/" class="external-link">Jinja-style
notation</a>, which means that slots will look like this:
<code>{{ object }}</code></p></li>
<li><p><strong>Template</strong> - A template is a string with slots for
particular data types. For example:
<code>{{ object }} has a {{ quality }} of {{ value }} {{ unit }}</code></p></li>
<li><p><strong>Statement</strong> - A statement is a plain language
sentence that contains entries for slots. For example:
<code>Apple X has a weight of 241.68 grams</code></p></li>
</ul>
<p>Templates are made up of slots and semantic information that links
them together. The slots are filled by statements, which can be parsed
by <code>rosettaR</code> into any different data structure.</p>
<div class="section level2">
<h2 id="single-template-statement-pair">Single template-statement pair<a class="anchor" aria-label="anchor" href="#single-template-statement-pair"></a>
</h2>
<p>There are two variables saved in the package for you to work with.
This template-statement pair describes the weight of an apple. Let’s
declare them here so we can see what is inside:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">apple_template</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "{{ object }} has a {{ quality }} of {{ value }} {{ unit }}"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">apple_statement</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Apple X has a weight of 241.68 grams"</span></span></code></pre></div>
<p>The idea behind <code>rosettaR</code> is that one may want to model
the knowledge contained in this sentence in multiple ways. The
template-statement pair constitutes a core piece of information
(sometimes called a “semantic anchor”) that can be transformed into
multiple representations.</p>
<p>Here we can turn it into a data frame:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/rosetta_format.html">rosetta_format</a></span><span class="op">(</span><span class="va">apple_statement</span>, <span class="va">apple_template</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">object</th>
<th align="left">quality</th>
<th align="left">value</th>
<th align="left">unit</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Apple X</td>
<td align="left">weight</td>
<td align="left">2</td>
<td align="left">41.68 grams</td>
</tr></tbody>
</table>
<p>That’s a pretty straightforward usage, but we can get more
complicated with it. Here we can transform the statement into a CSV,
where the slots become column headers and the values go in the
columns:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/rosetta_format.html">rosetta_format</a></span><span class="op">(</span><span class="va">apple_statement</span>, <span class="va">apple_template</span>, <span class="st">"Object,Quality,Value,Unit\n{{ object }},{{ quality }},{{ value }},{{ unit }}"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Object,Quality,Value,Unit\nApple X,weight,2,41.68 grams"</span></span></code></pre></div>
<p>We’re still in pretty simple territory here, so let’s get a little
more complex. The original idea behind Rosetta Statements was to make it
easier to create knowledge graphs in RDF. So here is an example of an
RDF graph that describes the weight of an apple:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">apple_rdf</span> <span class="op">&lt;-</span> <span class="st">'@prefix ex:    &lt;http://example.org/instance/&gt; .</span></span>
<span><span class="st">@prefix ncit:  &lt;http://ncicb.nci.nih.gov/xml/owl/EVS/Thesaurus.owl#&gt; .</span></span>
<span><span class="st">@prefix pato:  &lt;http://purl.obolibrary.org/obo/PATO_&gt; .</span></span>
<span><span class="st">@prefix iao:   &lt;http://purl.obolibrary.org/obo/IAO_&gt; .</span></span>
<span><span class="st">@prefix obi:   &lt;http://purl.obolibrary.org/obo/OBI_&gt; .</span></span>
<span><span class="st">@prefix ro:    &lt;http://purl.obolibrary.org/obo/RO_&gt; .</span></span>
<span><span class="st">@prefix uo:    &lt;http://purl.obolibrary.org/obo/UO_&gt; .</span></span>
<span><span class="st">@prefix rdf:   &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt; .</span></span>
<span><span class="st">@prefix rdfs:  &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .</span></span>
<span><span class="st">@prefix xsd:   &lt;http://www.w3.org/2001/XMLSchema#&gt; .</span></span>
<span><span class="st"></span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st">## OBJECT: the particular apple</span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st"></span></span>
<span><span class="st">ex:apple</span></span>
<span><span class="st">    rdf:type ncit:apple ;</span></span>
<span><span class="st">    rdfs:label "{{ object }}" ;</span></span>
<span><span class="st">    ro:has_quality ex:apple{{ quality }} .</span></span>
<span><span class="st"></span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st">## QUALITY: weight of the apple</span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st"></span></span>
<span><span class="st">ex:apple{{ quality }}</span></span>
<span><span class="st">    rdf:type pato:{{ quality }} ;                 # PATO:weight</span></span>
<span><span class="st">    iao:is_about ex:apple ;</span></span>
<span><span class="st">    iao:is_quality_measured_as ex:apple{{ quality }}Datum .</span></span>
<span><span class="st"></span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st">## MEASUREMENT DATUM</span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st"></span></span>
<span><span class="st">ex:apple{{ quality }}Datum</span></span>
<span><span class="st">    rdf:type iao:0000109 ;                  # IAO:scalar measurement datum</span></span>
<span><span class="st">    obi:has_value_specification ex:apple{{ quality }}ValueSpec .</span></span>
<span><span class="st"></span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st">## VALUE SPECIFICATION</span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st"></span></span>
<span><span class="st">ex:apple{{ quality }}ValueSpec</span></span>
<span><span class="st">    rdf:type obi:0001938 ;                  # OBI:scalar value specification</span></span>
<span><span class="st">    iao:has_measurement_value "{{ value }}"^^xsd:double ;</span></span>
<span><span class="st">    iao:has_measurement_unit_label uo:0000021 .</span></span>
<span><span class="st"></span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st">## UNIT</span></span>
<span><span class="st">############################################################</span></span>
<span><span class="st"></span></span>
<span><span class="st">uo:0000021</span></span>
<span><span class="st">    rdf:type uo:{{ unit }} .'</span></span></code></pre></div>
<p>Describing what exactly this TTL does is beyond the scope of this
vignette, but if you are reading this it is likely you have some idea
about RDF/OWL/etc. So let’s feed that string into our workflow and see
what happens:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">rosetta_format</span>(apple_statement, apple_template, apple_rdf))</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="sc">@</span>prefix ex<span class="sc">:</span>    <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>example.org<span class="sc">/</span>instance<span class="sc">/</span><span class="er">&gt;</span> .</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="sc">@</span>prefix ncit<span class="sc">:</span>  <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>ncicb.nci.nih.gov<span class="sc">/</span>xml<span class="sc">/</span>owl<span class="sc">/</span>EVS<span class="sc">/</span>Thesaurus.owl<span class="co">#&gt; .</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="sc">@</span>prefix pato<span class="sc">:</span>  <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>purl.obolibrary.org<span class="sc">/</span>obo<span class="sc">/</span>PATO_<span class="sc">&gt;</span> .</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="sc">@</span>prefix iao<span class="sc">:</span>   <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>purl.obolibrary.org<span class="sc">/</span>obo<span class="sc">/</span>IAO_<span class="sc">&gt;</span> .</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="sc">@</span>prefix obi<span class="sc">:</span>   <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>purl.obolibrary.org<span class="sc">/</span>obo<span class="sc">/</span>OBI_<span class="sc">&gt;</span> .</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="sc">@</span>prefix ro<span class="sc">:</span>    <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>purl.obolibrary.org<span class="sc">/</span>obo<span class="sc">/</span>RO_<span class="sc">&gt;</span> .</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="sc">@</span>prefix uo<span class="sc">:</span>    <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>purl.obolibrary.org<span class="sc">/</span>obo<span class="sc">/</span>UO_<span class="sc">&gt;</span> .</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="sc">@</span>prefix rdf<span class="sc">:</span>   <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>www.w3.org<span class="sc">/</span><span class="dv">1999</span><span class="sc">/</span><span class="dv">02</span><span class="sc">/</span><span class="dv">22</span><span class="sc">-</span>rdf<span class="sc">-</span>syntax<span class="sc">-</span>ns<span class="co">#&gt; .</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="sc">@</span>prefix rdfs<span class="sc">:</span>  <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>www.w3.org<span class="sc">/</span><span class="dv">2000</span><span class="sc">/</span><span class="dv">01</span><span class="sc">/</span>rdf<span class="sc">-</span>schema<span class="co">#&gt; .</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="sc">@</span>prefix xsd<span class="sc">:</span>   <span class="er">&lt;</span>http<span class="sc">:</span><span class="er">//</span>www.w3.org<span class="sc">/</span><span class="dv">2001</span><span class="sc">/</span>XMLSchema<span class="co">#&gt; .</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="do">## OBJECT: the particular apple</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>ex<span class="sc">:</span>apple</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    rdf<span class="sc">:</span>type ncit<span class="sc">:</span>apple ;</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    rdfs<span class="sc">:</span>label <span class="st">"Apple X"</span> ;</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>    ro<span class="sc">:</span>has_quality ex<span class="sc">:</span>appleweight .</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="do">## QUALITY: weight of the apple</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>ex<span class="sc">:</span>appleweight</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>    rdf<span class="sc">:</span>type pato<span class="sc">:</span>weight ;                 <span class="co"># PATO:weight</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>    iao<span class="sc">:</span>is_about ex<span class="sc">:</span>apple ;</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a>    iao<span class="sc">:</span>is_quality_measured_as ex<span class="sc">:</span>appleweightDatum .</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="do">## MEASUREMENT DATUM</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>ex<span class="sc">:</span>appleweightDatum</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>    rdf<span class="sc">:</span>type iao<span class="sc">:</span><span class="dv">0000109</span> ;                  <span class="co"># IAO:scalar measurement datum</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>    obi<span class="sc">:</span>has_value_specification ex<span class="sc">:</span>appleweightValueSpec .</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="do">## VALUE SPECIFICATION</span></span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>ex<span class="sc">:</span>appleweightValueSpec</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>    rdf<span class="sc">:</span>type obi<span class="sc">:</span><span class="dv">0001938</span> ;                  <span class="co"># OBI:scalar value specification</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a>    iao<span class="sc">:</span>has_measurement_value <span class="st">"2"</span><span class="sc">^</span><span class="er">^</span>xsd<span class="sc">:</span>double ;</span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>    iao<span class="sc">:</span>has_measurement_unit_label uo<span class="sc">:</span><span class="dv">0000021</span> .</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a></span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a><span class="do">## UNIT</span></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a><span class="do">############################################################</span></span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>uo<span class="sc">:</span><span class="dv">0000021</span></span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a>    rdf<span class="sc">:</span>type uo<span class="sc">:</span><span class="fl">41.68</span> grams .</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="processing-multiple-statements">Processing multiple statements<a class="anchor" aria-label="anchor" href="#processing-multiple-statements"></a>
</h2>
<p>Doing a single statement is fairly trivial. The real power of Rosetta
Statements comes when you have a lot of statements using multiple
templates. In order to make this work, there needs to be a library of
templates.</p>
<p>This “library” is a simple data frame, but it has to have specific
headers. We have built a command that creates one (or loads one from a
properly formatted CSV)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an empty library</span></span>
<span><span class="va">empty_lib</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init_library.html">init_library</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">empty_lib</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">TemplateID</th>
<th align="left">templateText</th>
<th align="left">metaTemplateID</th>
</tr></thead>
<tbody></tbody>
</table>
<p>Now let’s load a real set of templates that we have included as an
example using the <code><a href="../reference/init_library.html">init_library()</a></code> function. This function
verifies that the template file is formatted properly:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">templates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/init_library.html">init_library</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/apple_templates.csv"</span>, package<span class="op">=</span><span class="st">"rosettaR"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">templates</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="11%">
<col width="72%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="right">TemplateID</th>
<th align="left">templateText</th>
<th align="left">metaTemplateID</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">{{ object }} has a {{ quality }} of {{ value }} {{ unit
}}</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">{{ object }} was grown in {{ location }} and picked {{
date_picked }}</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">{{ object }} has the effect of making a human {{
magical_effect }}</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Next, let’s load some statements. Note that these are just plain text
strings:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">statements</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/apple_statements.csv"</span>, package<span class="op">=</span><span class="st">"rosettaR"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">statements</span><span class="op">)</span></span>
<span><span class="co">#&gt;   TemplateID                                              statement</span></span>
<span><span class="co">#&gt; 1          1                   Apple X has a weight of 2332.4 grams</span></span>
<span><span class="co">#&gt; 2          1                       Apple Y has a weight of 23 stone</span></span>
<span><span class="co">#&gt; 3          2           Apple X was grown in Germany and picked 2025</span></span>
<span><span class="co">#&gt; 4          2 Apple Y was grown in Canada and picked January 4, 2025</span></span>
<span><span class="co">#&gt; 5          3         Apple X has the effect of making a human happy</span></span>
<span><span class="co">#&gt; 6          3        Apple Y has the effect of making a human sleepy</span></span></code></pre></div>
<p>We can now use the <code><a href="../reference/rosetta_match.html">rosetta_match()</a></code> function. This
“router” function automatically iterates through your statements, finds
the matching template in your library, and extracts the data.</p>
<p>Unlike the simple rosetta_format which returns a wide dataframe
(columns for variables), <code>rosetta_match</code> returns a Long
Dataframe (Entity-Attribute-Value). This ensures that we don’t get a
“sparse matrix” full of NAs when mixing different templates.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rosetta_match.html">rosetta_match</a></span><span class="op">(</span><span class="va">statements</span>, <span class="va">templates</span><span class="op">)</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">statement_id</th>
<th align="left">statement_text</th>
<th align="left">template_id</th>
<th align="left">variable</th>
<th align="left">value</th>
</tr></thead>
<tbody></tbody>
</table>
<p>This output structure is ideal for building knowledge graphs, as
every row corresponds to a single semantic fact
(Subject-Predicate-Object).</p>
</div>
<div class="section level2">
<h2 id="advanced-templating">Advanced templating<a class="anchor" aria-label="anchor" href="#advanced-templating"></a>
</h2>
<p>Real-world data is rarely as clean as “Apple 1 has a weight of 100
g”. Often, statements include optional details or citations.
<code>rosettaR</code> supports advanced template syntax to handle these
cases.</p>
<div class="section level3">
<h3 id="optional-information-in-templates">Optional information in templates<a class="anchor" aria-label="anchor" href="#optional-information-in-templates"></a>
</h3>
<p>You can mark parts of a template as optional by enclosing them in
square brackets <code>[...]</code>. If the text inside the brackets is
missing from the statement, the parser will simply skip it (and return
empty values for those slots) rather than throwing an error.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Template with optional 'region' block</span></span>
<span><span class="va">tmpl</span> <span class="op">&lt;-</span> <span class="st">"{{ city }} is located in {{ country }} [in the region of {{ region }}]"</span></span>
<span></span>
<span><span class="co"># Statement WITH region</span></span>
<span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="st">"Kitchener is located in Canada in the region of Waterloo"</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/rosetta_format.html">rosetta_format</a></span><span class="op">(</span><span class="va">s1</span>, <span class="va">tmpl</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">city</th>
<th align="left">country</th>
<th align="left">region</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Kitchener</td>
<td align="left">Canada</td>
<td align="left">Waterloo</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Statement WITHOUT region</span></span>
<span><span class="va">s2</span> <span class="op">&lt;-</span> <span class="st">"Kitchener is located in Canada"</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/rosetta_format.html">rosetta_format</a></span><span class="op">(</span><span class="va">s2</span>, <span class="va">tmpl</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">city</th>
<th align="left">country</th>
<th align="left">region</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Kitchener</td>
<td align="left">Canada</td>
<td align="left"></td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="attribution-and-sources">Attribution and sources<a class="anchor" aria-label="anchor" href="#attribution-and-sources"></a>
</h3>
<p>A key requirement for scientific knowledge graphs is attribution. You
can include citation logic directly in your templates. This makes it
explicit which statement is associated with which source.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Template explicitly asking for a DOI</span></span>
<span><span class="va">cited_tmpl</span> <span class="op">&lt;-</span> <span class="st">"{{ city }} is in {{ country }} according to {{ doi }}"</span></span>
<span></span>
<span><span class="co"># Input statement</span></span>
<span><span class="va">stmt</span> <span class="op">&lt;-</span> <span class="st">"Kitchener is in Canada according to 10.123/example"</span></span>
<span></span>
<span><span class="co"># Result captures both the fact AND the source</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/rosetta_format.html">rosetta_format</a></span><span class="op">(</span><span class="va">stmt</span>, <span class="va">cited_tmpl</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">city</th>
<th align="left">country</th>
<th align="left">doi</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Kitchener</td>
<td align="left">Canada</td>
<td align="left">10.123/example</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h3>
<p>Extracting data is only half the battle; we also need to ensure it is
valid. rosettaR integrates with LinkML (via Python) to validate your
extracted data against a schema.</p>
<p>This ensures, for example, that an extracted “Age” is actually a
number, or that a “Country” matches a specific list of allowed
terms.</p>
<div class="section level4">
<h4 id="defining-a-schema">Defining a schema<a class="anchor" aria-label="anchor" href="#defining-a-schema"></a>
</h4>
<p>LinkML schemas are defined in YAML. Here is a simple example schema
for our Apple data:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schema_yaml</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">id: [https://example.org/apple-schema](https://example.org/apple-schema)</span></span>
<span><span class="st">name: AppleSchema</span></span>
<span><span class="st">imports:</span></span>
<span><span class="st">  - linkml:types</span></span>
<span><span class="st">default_range: string</span></span>
<span><span class="st"></span></span>
<span><span class="st">classes:</span></span>
<span><span class="st">  AppleObservation:</span></span>
<span><span class="st">    attributes:</span></span>
<span><span class="st">      object:</span></span>
<span><span class="st">        required: true</span></span>
<span><span class="st">      value:</span></span>
<span><span class="st">        range: float  # Value must be a number!</span></span>
<span><span class="st">      unit:</span></span>
<span><span class="st">        range: string</span></span>
<span><span class="st">"</span></span>
<span><span class="co"># Save to a temporary file for this example</span></span>
<span><span class="va">schema_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".yaml"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="va">schema_yaml</span>, <span class="va">schema_file</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="validating-data">Validating data<a class="anchor" aria-label="anchor" href="#validating-data"></a>
</h4>
<p>We can take the output from <code>rosetta_format</code> and check it
against this schema.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Good Data</span></span>
<span><span class="va">good_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>object <span class="op">=</span> <span class="st">"Apple A"</span>, value <span class="op">=</span> <span class="fl">150.5</span>, unit <span class="op">=</span> <span class="st">"g"</span><span class="op">)</span></span>
<span><span class="va">res_good</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rosetta_validate.html">rosetta_validate</a></span><span class="op">(</span><span class="va">good_data</span>, <span class="va">schema_file</span>, target_class <span class="op">=</span> <span class="st">"AppleObservation"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Good Data is Valid:"</span>, <span class="va">res_good</span><span class="op">$</span><span class="va">ok</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Bad Data (Value is a string 'Heavy', not a float)</span></span>
<span><span class="va">bad_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>object <span class="op">=</span> <span class="st">"Apple B"</span>, value <span class="op">=</span> <span class="st">"Heavy"</span>, unit <span class="op">=</span> <span class="st">"g"</span><span class="op">)</span></span>
<span><span class="va">res_bad</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rosetta_validate.html">rosetta_validate</a></span><span class="op">(</span><span class="va">bad_data</span>, <span class="va">schema_file</span>, target_class <span class="op">=</span> <span class="st">"AppleObservation"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Bad Data is Valid:"</span>, <span class="va">res_bad</span><span class="op">$</span><span class="va">ok</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">res_bad</span><span class="op">$</span><span class="va">ok</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res_bad</span><span class="op">$</span><span class="va">issues</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>This validation step acts as a powerful gatekeeper, ensuring that
only high-quality, structured data enters your final knowledge graph. #
Under construction - much more to come! <strong>To do:</strong></p>
<ul>
<li>Add slot validation functionality</li>
<li>Document multiple template/statement pairs and template library
functionality</li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tim Alamenciak, Tarek Al Mustafa.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
